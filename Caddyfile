# Pocket Ratings reverse proxy: path-based routing.
# /api/v1/* -> backend; everything else -> frontend.
#
# Site address (first line below): choose one.
#   http://localhost    - local dev; accept only localhost traffic.
#   :80                 - listen on port 80, accept any hostname.
#   https://your.domain - Caddy terminates TLS and obtains a certificate.

:80 {
	# API: forward /api/v1/* to the backend (full path preserved)
	@api path /api/v1/*
	handle @api {
		reverse_proxy backend:3099
	}
	# Everything else: frontend (static SPA)
	handle {
		reverse_proxy frontend:8080
	}
}
