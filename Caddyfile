# Pocket Ratings reverse proxy: path-based routing.
#
# Local dev (HTTP only): use this block as-is. Open http://localhost
# Production (HTTPS + Let's Encrypt): replace "http://localhost" with your domain, e.g.:
#   https://pocketratings.example.com
# Caddy will obtain and renew a certificate automatically.

http://localhost {
	# API: forward /api/v1/* to the backend (full path preserved)
	@api path /api/v1/*
	handle @api {
		reverse_proxy backend:3099
	}
	# Everything else: frontend (static SPA)
	handle {
		reverse_proxy frontend:8080
	}
}
